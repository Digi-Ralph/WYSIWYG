{"version":3,"sources":["index.js","javascript.js"],"names":["h2","document","querySelector","containertitle","titleLayout","input","e","nextSpan","firstElementChild","tagName","title","innerText","length","remove","a","insertAdjacentHTML","blockCretChange","key","preventDefault","focus","getCaretCoordinates","x","y","width","window","getSelection","selection","rangeCount","rect","getRangeAt","cloneRange","getClientRects","left","top","toggleTooltip","tooltip","getElementById","toString","scrollTop","undefined","pageYOffset","documentElement","body","parentNode","setAttribute","textcontainer","layouttext","placeholdertext","holderText","innerLength","valueOf","stopDefault","stopDefaultText","console","log","addEventListener","text_bold","SelectionText","execCommand","text_italic","text_underline","text_highlight","Sel","anchorNode","parentElement","removeAllRanges","hyperLink","url","prompt","savedSel","sel","i","len","addRange","select","restoreSelection","ranges","push","createRange","saveSelection","att","endContainer"],"mappings":"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","file":"index.js","sourcesContent":["const h2 = document.querySelector('h1')\r\nconst containertitle = document.querySelector('.title-container')\r\nconst titleLayout = document.querySelector('.layout-title')\r\n\r\n\r\nconst input = e => {\r\n    const nextSpan = h2.firstElementChild.tagName\r\n    const title = h2.innerText.length\r\n    if (title === 1) {\r\n        const a = `<span class=\"placeholder-title\" placeholder = \"Untitled\"></span>`\r\n        titleLayout.insertAdjacentHTML('afterbegin', a)\r\n        return\r\n    } else if (title > 1 && nextSpan === \"SPAN\") {\r\n        h2.firstElementChild.remove()\r\n        return\r\n    }\r\n\r\n}\r\n\r\n\r\n\r\nconst blockCretChange = (e) => {\r\n    if (e.key === 'Enter') {\r\n        e.preventDefault()\r\n        document.querySelector('#block_one').focus()\r\n    }\r\n}\r\n\r\n\r\n\r\n//\r\nfunction getCaretCoordinates() {\r\n    let x = 0,\r\n        y = 0;\r\n    width = 0;\r\n    const isSupported = typeof window.getSelection !== \"undefined\";\r\n    if (isSupported) {\r\n        const selection = window.getSelection();\r\n        // Check if there is a selection (i.e. cursor in place)\r\n        if (selection.rangeCount !== 0) {\r\n            // Clone the range\r\n            const range = selection.getRangeAt(0).cloneRange();\r\n            // Collapse the range to the start, so there are not multiple chars selected\r\n            // range.collapse(true);\r\n            // getCientRects returns all the positioning information we need\r\n            const rect = range.getClientRects()[0];\r\n            // console.log(rect)\r\n            // const rect = range.getBoundingClientRect();\r\n            if (rect) {\r\n                x = rect.left; // since the caret is only 1px wide, left == right\r\n                y = rect.top; // top edge of the caret\r\n                width = rect.width\r\n            }\r\n        }\r\n    }\r\n    return {\r\n        x,\r\n        y,\r\n        width\r\n    };\r\n\r\n}\r\n\r\n\r\n\r\nfunction toggleTooltip() {\r\n    const tooltip = document.getElementById(\"tooltip\");\r\n    const stringLength = window.getSelection().toString().length\r\n    if (stringLength > 0) {\r\n        let scrollTop =\r\n            (window.pageYOffset !== undefined) ? window.pageYOffset :\r\n            (document.documentElement || document.body.parentNode || document.body).scrollTop;\r\n        const {\r\n            x,\r\n            y,\r\n            width\r\n        } = getCaretCoordinates();\r\n        tooltip.setAttribute(\"aria-hidden\", \"false\");\r\n        tooltip.setAttribute(\r\n            \"style\",\r\n            `display: flex;\r\n            justify-content: space-evenly;\r\n            align-items: center; \r\n            left:${(x + (width / 2)) - 140}px; \r\n            top: ${(y + scrollTop) - 65}px;\r\n            `\r\n        );\r\n    } else {\r\n        tooltip.setAttribute(\"aria-hidden\", \"true\");\r\n        tooltip.setAttribute(\"style\", \"display: none;\");\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\nconst textcontainer = document.querySelector('.text-container')\r\nconst layouttext = document.querySelector('.layout-text')\r\nconst placeholdertext = document.querySelector('.placeholder-text')\r\n\r\n\r\nconst holderText = () => {\r\n    const innerLength = textcontainer.firstElementChild.innerText.valueOf().length\r\n    const nextSpan = layouttext.firstElementChild.tagName\r\n    if (innerLength === 1) {\r\n        const a = `<span class=\"placeholder-text\" placeholder = \"Write Your Story\"></span>`\r\n        layouttext.insertAdjacentHTML('afterbegin', a)\r\n        return\r\n    } else if (innerLength > 1 && nextSpan === \"SPAN\") {\r\n        layouttext.firstElementChild.remove()\r\n        return\r\n    }\r\n}\r\n\r\nconst stopDefault = e => {\r\n    const x = h2.innerText.valueOf().length\r\n  \r\n    // layouttext.textContent.length // \r\n    if ((e.key == 'Backspace' || e.key == \"Delete\") && x < 2) {\r\n        e.preventDefault()\r\n    }  \r\n\r\n}\r\nconst stopDefaultText = e => {\r\n    const innerLength = textcontainer.firstElementChild.innerText.valueOf().length\r\n    console.log(innerLength)\r\n    if ((e.key == 'Backspace' || e.key == \"Delete\") && innerLength === 1) {\r\n        e.preventDefault()\r\n    }\r\n}\r\n\r\ncontainertitle.addEventListener('input', input)\r\ncontainertitle.addEventListener('keydown', stopDefault)\r\ncontainertitle.addEventListener('keydown', blockCretChange)\r\ntextcontainer.addEventListener('input', holderText)\r\ntextcontainer.addEventListener('keydown', stopDefaultText)\r\ndocument.addEventListener(\"mouseup\", (e) => toggleTooltip());","// Editor & text manupilation.\r\n\r\nconst text_bold = document.getElementById(\"bold\")\r\ntext_bold.addEventListener('click', e => {\r\n    const SelectionText = window.getSelection().toString()\r\n    document.execCommand('bold', false, SelectionText)\r\n})\r\n//ITALIC\r\nconst text_italic = document.getElementById(\"italic\")\r\ntext_italic.addEventListener('click', e => {\r\n    const SelectionText = window.getSelection().toString()\r\n    document.execCommand('italic', false, SelectionText)\r\n})\r\n//underline\r\nconst text_underline = document.getElementById(\"underline\")\r\ntext_underline.addEventListener('click', e => {\r\n    const SelectionText = window.getSelection().toString()\r\n    document.execCommand('underline', false, SelectionText)\r\n    \r\n})\r\n\r\n//Highlight\r\n// bug => from right to left works / anchoring from left to right create a bug where \r\n// all text written or the caret position get inside the colored tag (highlited)\r\n// fix with white-space = pre-wrap  on the parent cotenteditable. \r\nconst text_highlight = document.getElementById(\"highlighter\")\r\ntext_highlight.addEventListener('click', e => {\r\n    document.execCommand('HiliteColor', false, 'yellow')\r\n    const Sel = window.getSelection()\r\n    const space = `\\uFEFF`\r\n    const node = Sel.anchorNode.parentElement // select the wrapped text\r\n    node.insertAdjacentHTML(\"afterend\", space) // bug fixing //fixed with pre-wrap\r\n    Sel.removeAllRanges()\r\n})\r\n\r\n\r\n//HyperLink\r\nconst hyperLink = document.getElementById('link')\r\nhyperLink.addEventListener('click', e => {\r\n    const link = prompt('Enter a URL:', 'http://');\r\n    var savedSel = saveSelection();\r\n    var url = link;\r\n    restoreSelection(savedSel);\r\n    document.execCommand(\"CreateLink\", false, url);\r\n    const TheSel = window.getSelection()\r\n    const range = TheSel.getRangeAt(0)\r\n    const att = range.endContainer.parentElement // select the selected node\r\n    att.setAttribute('style', `cursor:pointer;`)\r\n    att.setAttribute('target', `_blank`)\r\n\r\n\r\n    function saveSelection() {\r\n        if (window.getSelection) {\r\n            sel = window.getSelection();\r\n            if (sel.getRangeAt && sel.rangeCount) {\r\n                const ranges = [];\r\n                for (var i = 0, len = sel.rangeCount; i < len; ++i) {\r\n                    ranges.push(sel.getRangeAt(i));\r\n                }\r\n                return ranges;\r\n            }\r\n        } else if (document.selection && document.selection.createRange) {\r\n            return document.selection.createRange();\r\n        }\r\n        return null;\r\n    }\r\n\r\n    function restoreSelection(savedSel) {\r\n        if (savedSel) {\r\n            if (window.getSelection) {\r\n                sel = window.getSelection();\r\n                sel.removeAllRanges();\r\n                for (var i = 0, len = savedSel.length; i < len; ++i) {\r\n                    sel.addRange(savedSel[i]);\r\n                }\r\n            } else if (document.selection && savedSel.select) {\r\n                savedSel.select();\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n\r\n})\r\n"]}